<!DOCTYPE html>
<html>
<head>

	<link href="https://fonts.googleapis.com/css?family=Barlow+Condensed" rel="stylesheet">
	<script src="scrollmagicGit/scrollmagic/minified/ScrollMagic.min.js"></script>
	<script src="scrollmagicGit/scrollmagic/minified/plugins/animation.gsap.min.js"></script>
	<script src="js/TweenMax.min.js"></script>

	<!-- For debugging -->
	<script src="scrollmagicGit/scrollmagic/minified/plugins/debug.addIndicators.min.js"></script>
	<!-- For debugging end -->

	<meta charset="utf-8">
	<title>Eine DI - Botschafter Geschichte</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script>
		// init controller
		let controller = new ScrollMagic.Controller();
	</script>
	<script type="text/javascript">
		// setup default variables & functions
		window.isMouseDown = false;
		window.userAudioSetting;

		// event functions
		function onMouseClick(evt)
		{
			//console.log("mouseClick", evt);
		}

		function onMove(evt)
		{
			//console.log("move", evt);
		}

		function onDoubleClick(evt)
		{
			//console.log("onDoubleClick", evt);
		}

		function onMouseDown(evt)
		{
			//console.log("onMouseDown", evt);
			window.isMouseDown = true;
		}

		function onMouseUp(evt)
		{
			//console.log("onMouseUp", evt);
			window.isMouseDown = false;
		}

		// audio stuff
		function fadeOutAudio (audioElement, fadeOutTimeMS = 1000)
		{
			window.isFading = true;

			$(audioElement).animate(
			{
				volume: 0.0
			},
			{
				duration: fadeOutTimeMS,
				complete: function ()
				{
					// this shit gets called before the last onvolumechange
					//console.log("finished fading");
					window.isFading = false;
				}
			});
		}

		function fadeInAudio (audioElement, fadeInTimeMS = 1000)
		{
			window.isFading = true;

			$(audioElement).animate(
			{
				volume: localStorage.getItem("defaultUserAudioSetting") ? localStorage.getItem("defaultUserAudioSetting") : 0.7
			},
			{
				duration: fadeInTimeMS,
				complete: function ()
				{
					// this shit gets called before the last onvolumechange
					//console.log("finished fading");
					window.isFading = false;
				}
			});
		}

		function returnAudioSources(arr)
		{
			let onlyAudios = [];

			arr.forEach( function (ele, index)
			{
				if (ele.src)
				{
					onlyAudios = onlyAudios.concat(ele);
				}
			});

			return onlyAudios;
		}

		function setAudioSource (audioElement, sourceNumber)
		{
			let audioFiles = returnAudioSources(audioElement.childNodes)

			if (audioFiles.length >= sourceNumber)
			{
				audioElement.src = audioFiles[sourceNumber -1].src;
			}
			else if (audioFiles.length > 0)
			{
				audioElement.src = audioFiles[audioFiles.length -1].src;
			}

			audioElement.load();
			audioElement.play();
		}
	</script>
</head>
<body>

<audio controls="controls" id="audioPlayer" loop style="display: none;">
	Your old ugly browser does not support the <code>audio</code> element.
	<source src="audio/Twiced_O_-_03_-_Fugue_Of_The_Masses.mp3" type="audio/wav">
	<source src="audio/Gabe_Boyer_-_03_-_Got_to_Get_With_You.mp3" type="audio/wav">
	<source src="audio/La_Drugs_-_02_-_Bathroom_Stall.mp3" type="audio/wav">
</audio>

<!-- KAFFEE 1 -->
<div class="bgimg s-1">
	<div  class="slide right">
		<h1>Ein Tag im Leben eines Digital Ideation Botschafters.</h1>
		<p>Ahh, ein guter Kaffee und schon ist mein Morgen gut gestartet…</p>
	</div>
</div>

<!-- ZUG -->
<div class="bgimg s-2">
	<div  class="slide left"></div>
</div>

<!-- TWITTER 1 -->
<div class="fullPageContainer" class="whatsappImageContainer" id="whatsAppTriggerBlock03" style="background-color: white;">
	
	<img src="images/exampleWhatsApp.PNG" id="whatsAppBlock03" class="whatsappImage">

	<script type="text/javascript">
		let scene03;
		let whatsAppWipeAnimation = new TimelineMax()
			.fromTo(
				"#whatsAppBlock03",
				1, // duration in seconds
				{x: "-100%"},
				{x: "300%", ease: Linear.easeNone});

		scene03 = new ScrollMagic.Scene({
			triggerElement: "#whatsAppTriggerBlock03",
			triggerHook: "onLeave",
			duration: "100%"})
			.setPin("#whatsAppTriggerBlock03")
			.setTween(whatsAppWipeAnimation)
			.addTo(controller);
	</script>
</div>

<!-- ATELIER -->
<div class="bgimg s-3">
	<div  class="slide right">
		<p>Jetzt gehts aber los, ich habe noch einiges für die Schule zu erledigen. Zum glück habe ich an meinem Atelierplatz ruhe</p>
	</div>
</div>

<!-- KAFFEE 2 -->
<div class="bgimg s-4">
	<div  class="slide left">
	</div>
</div>

<!-- MENSA -->
<div class="bgimg s-5">
	<div  class="slide right">
		<p>Hmm, in der Mensa waren sie aber auch schon grosszügiger mit den Portionen…</p>
	</div>
</div>

<!-- TOWERFALLS -->
<div class="bgimg s-6">
	<div  class="slide right">
		<p>Bevor es weitergeht erst noch eine Runde Towerfalls. Heute ist der erste Platz für mich reserviert!</p>
	</div>
</div>

<!-- BIER -->
<div class="bgimg s-7">
	<div  class="slide left">
		<p>Bevor ich mich auf den Nachhauseweg mache, gibt es zuerst noch ein Bier bei dieser herrlichen Aussicht.</p>
	</div>
</div>

<!-- SBB -->
<div class="bgimg s-8">
	<div  class="slide left">
		<p>****, jetzt muss ich mich aber beeilen um meinen Zug noch zu erwischen.</p>
	</div>
</div>

<!-- DINNER -->
<div class="bgimg s-9">
	<div  class="slide">
		<p></p>
	</div>
</div>

<!-- BETT -->
<div class="bgimg s-10">
	<div  class="slide right">
		<p>Der Tag verlief wirklich gut. Wir hatten eine gute Zeit und die Handyanfragen konnte ich alle schon beantworten. Mal schauen ob der nächste Tag das noch toppen kann!</p>
	</div>
</div>

<script type="text/javascript">
	let userAudioSetting = document.getElementById("audioPlayer");
	// for debug
	window.userAudioSetting = userAudioSetting;

	if (localStorage.getItem("defaultUserAudioSetting"))
	{
		userAudioSetting.volume = localStorage.getItem("defaultUserAudioSetting");
	}
	else
	{
		localStorage.setItem("defaultUserAudioSetting", userAudioSetting.volume);
	}

	userAudioSetting.onvolumechange = function ()
	{
		localStorage.setItem("userAudioSetting", this.volume);

		if (!window.isFading && window.isMouseDown)
		{
			localStorage.setItem("defaultUserAudioSetting", this.volume);
		}

		// console.log("onvolumechange:", this.volume);
	};

	// add all the eventlisteners
	document.body.onclick = function (evt)
	{
		onMouseClick(evt);
	};

	document.body.onmove = function (evt)
	{
		onMove(evt);
	};

	document.body.ondblclick = function (evt)
	{
		onDoubleClick(evt);
	};

	document.body.ondblclick = function (evt)
	{
		onDoubleClick(evt);
	};

	document.body.onmousedown = function (evt)
	{
		onMouseDown(evt);
	};

	document.body.onmouseup = function (evt)
	{
		onMouseUp(evt);
	};
</script>
</body>
</html>